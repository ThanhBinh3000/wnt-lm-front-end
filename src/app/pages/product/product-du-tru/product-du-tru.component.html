<div class="container body-content w-95">
  <div class="content">
    <div class="row">
      <!-- <div class="col-md-3">
        <div class="sidebar-bg">
          <form [formGroup]="formData">
            <div class="control-group btn-fullwidth flex-grow-1">
              <input type="button" value="Lưu phiếu" (click)="create()"
                     class="btn btn-primary w-100"/>
            </div>
          </form>
        </div>
      </div> -->
      <div class="col-md-12">
        <div class="baocao-container box-group-white">
          <h2 class="text-center">
            <b>{{ title }}</b>
          </h2>
          <form [formGroup]="formData">
            <div class="d-flex justify-content-end mb-3">
              <span><b>Tổng tiền:</b> {{formData.value?.tongTien | number}}</span>
            </div>
          </form>
          <div class="mat-table-container">
            <table mat-table class="table table-striped table-bordered table-hover tr-ng-grid"
              [dataSource]="getDataSource()" matSort>

              <ng-container matColumnDef="#">
                <th mat-header-cell *matHeaderCellDef> #</th>
                <td mat-cell *matCellDef="let data; index as i;">
                  <div class="text-right">
                    {{ (page - 1) * pageSize + i + 1 }}
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="tenThuoc">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Tên thuốc</th>
                <td mat-cell *matCellDef="let data">
                  <div class="text-left">{{ data.tenThuoc }}</div>
                </td>
              </ng-container>

              <ng-container matColumnDef="tenNhomThuoc">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Tên nhóm thuốc</th>
                <td mat-cell *matCellDef="let data">
                  <div class="text-left">{{ data.tenNhomThuoc }}</div>
                </td>
              </ng-container>

              <ng-container matColumnDef="duTru">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Dự trù</th>
                <td mat-cell *matCellDef="let data">
                  <input [(ngModel)]="data.duTru" (change)="updateTotal()" class="form-control mb-0" mask="separator"
                    type="text">
                </td>
              </ng-container>

              <ng-container matColumnDef="donViDuTru">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Đơn vị dự trù</th>
                <td mat-cell *matCellDef="let data">
                  <div class="text-left">{{ data.tenDonViTinh }}</div>
                </td>
              </ng-container>

              <ng-container matColumnDef="donGia">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Đơn giá</th>
                <td mat-cell *matCellDef="let data">
                  <div class="text-right">{{ data.donGia | number }}</div>
                </td>
              </ng-container>

              <ng-container matColumnDef="thanhTien">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Thành tiền</th>
                <td mat-cell *matCellDef="let data">
                  <div class="text-right">{{ data.duTru * data.donGia | number }}</div>
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let data">
                  <div class="baocao-actions" style="justify-content: start;">
                    <button class="btn btn-sm btn-danger" (click)="removeDrug(data)"><i class="fa fa-trash"
                        aria-hidden="true"></i></button>
                  </div>
                </td>
              </ng-container>

              <!-- <ng-container matColumnDef="footer">
                <td mat-footer-cell *matFooterCellDef colspan="100">
                  <app-pagination [currentPage]="page" [totalPages]="totalPages" [totalRecord]="totalRecord"
                                  (pageChange)="changePageIndex($event)"
                                  (pageSizeChange)="changePageSize($event)"></app-pagination>
                </td>
              </ng-container> -->

              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                [ngClass]="{'highlight-row': row.isHangBanChay}"></tr>
              <!-- <tr mat-footer-row *matFooterRowDef="['footer']; sticky: true"></tr> -->

            </table>
          </div>
          <div>
            <table class="table borderless table-condensed">
              <tbody>
                <tr>
                  <td colspan="2">
                    <div class="d-flex justify-content-center align-items-center gap-10">
                      <input type="button" value="Lưu phiếu" (click)="create()" class="btn btn-primary" />
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>